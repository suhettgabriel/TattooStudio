@page
@model TattooStudio.WebUI.Pages.SolicitarAgendamentoModel
@{
    ViewData["Title"] = "Solicitar Agendamento";
}

<div class="row justify-content-center">
    <div class="col-lg-8">
        <h1 class="mb-4">@ViewData["Title"]</h1>
        <p class="lead">Preencha o formulário abaixo com o máximo de detalhes possível.</p>
        <hr />

        <form method="post" enctype="multipart/form-data" class="mt-4">
            <div asp-validation-summary="All" class="text-danger mb-3"></div>

            <h4>Seus Dados</h4>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label asp-for="ClientInfo.FullName" class="form-label">Nome Completo</label>
                    <input asp-for="ClientInfo.FullName" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label asp-for="ClientInfo.Email" class="form-label">E-mail</label>
                    <input asp-for="ClientInfo.Email" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label asp-for="ClientInfo.PhoneNumber" class="form-label">WhatsApp</label>
                    <input asp-for="ClientInfo.PhoneNumber" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label asp-for="ClientInfo.InstagramHandle" class="form-label">Instagram (opcional)</label>
                    <input asp-for="ClientInfo.InstagramHandle" class="form-control" />
                </div>
            </div>

            <hr class="my-4" />

            <h4>Sobre a Tatuagem</h4>
            @foreach (var field in Model.FormFields)
            {
                <div class="mb-3">
                    <label class="form-label">@field.Label @(field.IsRequired ? "*" : "")</label>

                    @switch (field.FieldType)
                    {
                        case TattooStudio.Core.Entities.FormFieldType.UploadArquivo:
                            <input type="file" name="FileAnswers[@field.Id]" class="form-control" />
                            break;

                        case TattooStudio.Core.Entities.FormFieldType.TextoLongo:
                            <textarea name="Answers[@field.Id]" class="form-control" rows="4"></textarea>
                            break;

                        case TattooStudio.Core.Entities.FormFieldType.OpcaoUnica:
                            <select name="Answers[@field.Id]" class="form-select">
                                <option value="">Selecione...</option>
                                @foreach (var option in field.Options?.Split(',') ?? Array.Empty<string>())
                                {
                                    <option value="@option.Trim()">@option.Trim()</option>
                                }
                            </select>
                            break;

                        case TattooStudio.Core.Entities.FormFieldType.Numero:
                            <input type="number" name="Answers[@field.Id]" class="form-control" />
                            break;

                        case TattooStudio.Core.Entities.FormFieldType.Data:
                            <input type="date" name="Answers[@field.Id]" class="form-control" />
                            break;

                        default: // TextoCurto
                                 <input type="text" name="Answers[@field.Id]" class="form-control" />
                            break;
                    }
                </div>
            }

            <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Enviar Solicitação</button>
            </div>
        </form>
    </div>
</div>